"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],o=!0,a=!1,n=void 0;try{for(var l,s=e[Symbol.iterator]();!(o=(l=s.next()).done)&&(r.push(l.value),!t||r.length!==t);o=!0);}catch(e){a=!0,n=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw n}}return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _createForOfIteratorHelper(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,l=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return l=e.done,e},e:function(e){s=!0,n=e},f:function(){try{l||null==r.return||r.return()}finally{if(s)throw n}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}var navMain=document.querySelector(".main-nav"),navToggle=document.querySelector(".main-nav__toggle");navMain.classList.remove("main-nav--nojs"),navToggle.classList.remove("main-nav__toggle--nojs"),navToggle.addEventListener("click",(function(){navMain.classList.contains("main-nav--closed")?(navMain.classList.remove("main-nav--closed"),navMain.classList.add("main-nav--opened"),navToggle.classList.remove("main-nav__toggle--closed"),navToggle.classList.add("main-nav__toggle--opened")):(navMain.classList.add("main-nav--closed"),navMain.classList.remove("main-nav--opened"),navToggle.classList.add("main-nav__toggle--closed"),navToggle.classList.remove("main-nav__toggle--opened"))}));var showPopup=function(){orderBtn.addEventListener("click",(function(e){e.preventDefault(),popup.classList.add("modal__order--show"),overlay.classList.add("modal__overlay--show"),document.body.style.overflow="hidden"})),overlay.addEventListener("click",(function(e){popup.classList.remove("modal__order--show"),overlay.classList.remove("modal__overlay--show"),document.body.style.overflow=""})),window.addEventListener("keydown",(function(e){27===e.keyCode&&popup.classList.contains("modal__order--show")&&(popup.classList.remove("modal__order--show"),overlay.classList.remove("modal__overlay--show"),document.body.style.overflow="")}))},popup=document.querySelector(".modal__order"),overlay=document.querySelector(".modal__overlay"),orderBtn=document.querySelector(".features__order-btn");orderBtn&&showPopup();var showSlides=function(e){console.log("show slides work"),e>slides.length?slideIndex=1:e<1&&(slideIndex=slides.length),slides.forEach((function(e){return e.style.display="none"})),slides[slideIndex-1].style.display="block"},plusSlides=function(e){showSlides(slideIndex+=e)},slideIndex=1,slides=document.querySelectorAll(".comment__item"),arrowPrev=document.querySelector(".comment__slider-btn--prev"),arrowNext=document.querySelector(".comment__slider-btn--next");console.log(slides.length),slides.length>=1&&showSlides(slideIndex),arrowNext&&arrowNext.addEventListener("click",(function(){plusSlides(1)})),arrowPrev&&arrowPrev.addEventListener("click",(function(){plusSlides(-1)}));var basketValue=0,basketCount=0,cardOrderItem=document.querySelectorAll(".catalog-list__item"),basketElem=document.querySelector(".main-nav--basket");function requestForm(e){var t=document.querySelector(".order__required");e.addEventListener("submit",(function(r){r.preventDefault();var o=new XMLHttpRequest;o.open("POST","server.php"),o.setRequestHeader("Content-type","application/json; charset=utf-8");var a,n={},l=_createForOfIteratorHelper(new FormData(e).entries());try{for(l.s();!(a=l.n()).done;){var s=_slicedToArray(a.value,2),i=s[0],c=s[1];n[i]=c}}catch(e){l.e(e)}finally{l.f()}var d=JSON.stringify(n);o.send(d),o.addEventListener("readystatechange",(function(){o.readyState<4?(console.log("readyState < 4"),t.textContent="Отправка данних..."):4===o.readyState&&200===o.status?(console.log("readyState === 200"),t.textContent="Ваша заявка отправлена, ожидайте ответ"):(t.textContent="Что-то случилось, и Ваша заявка не отправлена. Мы уже бежим исправлять",console.log("readyState is bug"))}))}))}basketValue=JSON.parse(localStorage.getItem("localBasketValue")),(basketCount=JSON.parse(localStorage.getItem("localBasketCount")))>0&&basketValue>0&&(basketElem.textContent="".concat(basketValue," руб, ").concat(basketCount," товаров")),cardOrderItem.forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault();var t=this.querySelector(".catalog-list__info-price").dataset.price;e.target!==this.querySelector(".btn__order")&&e.target!==this.querySelector(".btn__order>svg")||(basketCount++,basketValue+=parseInt(t),localStorage.setItem("localBasketValue",basketValue),localStorage.setItem("localBasketCount",basketCount),basketValue=JSON.parse(localStorage.getItem("localBasketValue")),basketCount=JSON.parse(localStorage.getItem("localBasketCount")),basketElem.textContent="".concat(basketValue," руб, ").concat(basketCount," товаров"))}))})),document.querySelector(".order__form")&&requestForm(document.querySelector(".order__form"));